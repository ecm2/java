{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[334],{737:function(t,a,e){\"use strict\";e.r(a);var r=e(44),n=Object(r.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":t.$parent.slotKey}},[e(\"p\",[t._v(\"[TOC]\")]),t._v(\" \"),e(\"h1\",{attrs:{id:\"第四节-mvc-view-controller\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#第四节-mvc-view-controller\"}},[t._v(\"#\")]),t._v(\" 第四节 mvc:view-controller\")]),t._v(\" \"),e(\"h2\",{attrs:{id:\"_1、需求情景\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1、需求情景\"}},[t._v(\"#\")]),t._v(\" 1、需求情景\")]),t._v(\" \"),e(\"p\",[t._v(\"在一个 handler 方法中，仅仅只是完成 @RequestMapping 映射，将请求转发到目标视图，除此之外没有任何其他代码。此时可以使用 SpringMVC 配置文件中的配置代替这样的 handler 方法。\")]),t._v(\" \"),e(\"h2\",{attrs:{id:\"_2、具体操作\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2、具体操作\"}},[t._v(\"#\")]),t._v(\" 2、具体操作\")]),t._v(\" \"),e(\"h3\",{attrs:{id:\"_1配置\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1配置\"}},[t._v(\"#\")]),t._v(\" ①配置\")]),t._v(\" \"),e(\"p\",[t._v(\"在 SpringMVC 配置文件中使用 mvc:view-controller 配置：\")]),t._v(\" \"),e(\"div\",{staticClass:\"language-xml extra-class\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-xml\"}},[e(\"code\",[e(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[e(\"span\",{pre:!0,attrs:{class:\"token tag\"}},[e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"<\")]),e(\"span\",{pre:!0,attrs:{class:\"token namespace\"}},[t._v(\"mvc:\")]),t._v(\"view-controller\")]),t._v(\" \"),e(\"span\",{pre:!0,attrs:{class:\"token attr-name\"}},[t._v(\"path\")]),e(\"span\",{pre:!0,attrs:{class:\"token attr-value\"}},[e(\"span\",{pre:!0,attrs:{class:\"token punctuation attr-equals\"}},[t._v(\"=\")]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v('\"')]),t._v(\"/index.html\"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v('\"')])]),t._v(\" \"),e(\"span\",{pre:!0,attrs:{class:\"token attr-name\"}},[t._v(\"view-name\")]),e(\"span\",{pre:!0,attrs:{class:\"token attr-value\"}},[e(\"span\",{pre:!0,attrs:{class:\"token punctuation attr-equals\"}},[t._v(\"=\")]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v('\"')]),t._v(\"portal\"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v('\"')])]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"/>\")])]),t._v(\"\\n\")])])]),e(\"p\",[t._v(\"同时，handler 类中就可以去掉被代替的方法。\")]),t._v(\" \"),e(\"h3\",{attrs:{id:\"_2新的问题\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2新的问题\"}},[t._v(\"#\")]),t._v(\" ②新的问题\")]),t._v(\" \"),e(\"p\",[t._v(\"加入 mvc:view-controller 配置后，其他正常 @RequestMapping 将失效。此时还是需要加入 mvc:annotation-driven 来解决。\")]),t._v(\" \"),e(\"h2\",{attrs:{id:\"_3、三个配置影响访问效果探索-了解\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3、三个配置影响访问效果探索-了解\"}},[t._v(\"#\")]),t._v(\" 3、三个配置影响访问效果探索[了解]\")]),t._v(\" \"),e(\"h3\",{attrs:{id:\"_1相关组件-handlermapping\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1相关组件-handlermapping\"}},[t._v(\"#\")]),t._v(\" ①相关组件：HandlerMapping\")]),t._v(\" \"),e(\"p\",[t._v(\"见名知意，HandlerMapping 封装的数据包含了请求地址和 handler 方法之间的映射关系。所以请求访问是否能生效关键要看 HandlerMapping 在 IOC 容器中加载的情况。为了看到这一点，我们可以在 DispatcherServlet 中找到 doDispatch() 方法设置断点。之所以选择这个方法，是因为每一个由 SpringMVC 处理的请求都会经过这里，便于操作。\")]),t._v(\" \"),e(\"p\",[e(\"img\",{attrs:{src:\"images/img017.png\",alt:\"images\"}})]),t._v(\" \"),e(\"h3\",{attrs:{id:\"_2分三种情况查看\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2分三种情况查看\"}},[t._v(\"#\")]),t._v(\" ②分三种情况查看\")]),t._v(\" \"),e(\"h4\",{attrs:{id:\"_1-三个标签都没有配置\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-三个标签都没有配置\"}},[t._v(\"#\")]),t._v(\" [1]三个标签都没有配置\")]),t._v(\" \"),e(\"p\",[e(\"img\",{attrs:{src:\"images/img018.png\",alt:\"images\"}})]),t._v(\" \"),e(\"p\",[t._v(\"我们看到 SpringMVC 加载了三个 HandlerMapping：\")]),t._v(\" \"),e(\"blockquote\",[e(\"p\",[t._v(\"org.springframework.web.servlet.handler.\"),e(\"span\",{staticStyle:{color:\"blue\",\"font-weight\":\"bold\"}},[t._v(\"BeanNameUrlHandlerMapping\")])]),t._v(\" \"),e(\"p\",[t._v(\"org.springframework.web.servlet.mvc.method.annotation.\"),e(\"span\",{staticStyle:{color:\"blue\",\"font-weight\":\"bold\"}},[t._v(\"RequestMappingHandlerMapping\")])]),t._v(\" \"),e(\"p\",[t._v(\"org.springframework.web.servlet.function.support.\"),e(\"span\",{staticStyle:{color:\"blue\",\"font-weight\":\"bold\"}},[t._v(\"RouterFunctionMapping\")])])]),t._v(\" \"),e(\"p\",[t._v(\"其中 RequestMappingHandlerMapping 封装了 @RequestMapping 相关请求，有它在 @RequestMapping 相关请求就能访问到。\")]),t._v(\" \"),e(\"p\",[t._v(\"这里顺带一提，在较低版本的 SpringMVC 此处要加载的是：\")]),t._v(\" \"),e(\"blockquote\",[e(\"p\",[t._v(\"org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping\\norg.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping\")])]),t._v(\" \"),e(\"p\",[t._v(\"其中 DefaultAnnotationHandlerMapping 封装了 @RequestMapping 相关请求，有它在 @RequestMapping 相关请求就能访问到。\")]),t._v(\" \"),e(\"h4\",{attrs:{id:\"_2-增加一个标签\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2-增加一个标签\"}},[t._v(\"#\")]),t._v(\" [2]增加一个标签\")]),t._v(\" \"),e(\"p\",[t._v(\"配置了 mvc:view-controller 或 mvc:default-servlet-handler 之后。\")]),t._v(\" \"),e(\"p\",[e(\"img\",{attrs:{src:\"images/img019.png\",alt:\"images\"}})]),t._v(\" \"),e(\"p\",[t._v(\"我们看到 SpringMVC 加载了两个 HandlerMapping：\")]),t._v(\" \"),e(\"blockquote\",[e(\"p\",[t._v(\"org.springframework.web.servlet.handler.\"),e(\"span\",{staticStyle:{color:\"blue\",\"font-weight\":\"bold\"}},[t._v(\"SimpleUrlHandlerMapping\")])]),t._v(\" \"),e(\"p\",[t._v(\"org.springframework.web.servlet.handler.\"),e(\"span\",{staticStyle:{color:\"blue\",\"font-weight\":\"bold\"}},[t._v(\"BeanNameUrlHandlerMapping\")])])]),t._v(\" \"),e(\"p\",[t._v(\"较低版本的 SpringMVC 在这里的情况一样。\")]),t._v(\" \"),e(\"h4\",{attrs:{id:\"_3-全部配置三个标签\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-全部配置三个标签\"}},[t._v(\"#\")]),t._v(\" [3]全部配置三个标签\")]),t._v(\" \"),e(\"p\",[t._v(\"配置全部 mvc:view-controller、mvc:default-servlet-handler、mvc:annotation-driven 三个标签。\")]),t._v(\" \"),e(\"p\",[e(\"img\",{attrs:{src:\"images/img020.png\",alt:\"images\"}})]),t._v(\" \"),e(\"p\",[t._v(\"我们看到 SpringMVC 加载了略有不同的三个 HandlerMapping：\")]),t._v(\" \"),e(\"blockquote\",[e(\"p\",[t._v(\"org.springframework.web.servlet.mvc.method.annotation.\"),e(\"span\",{staticStyle:{color:\"blue\",\"font-weight\":\"bold\"}},[t._v(\"RequestMappingHandlerMapping\")])]),t._v(\" \"),e(\"p\",[t._v(\"org.springframework.web.servlet.handler.\"),e(\"span\",{staticStyle:{color:\"blue\",\"font-weight\":\"bold\"}},[t._v(\"SimpleUrlHandlerMapping\")])]),t._v(\" \"),e(\"p\",[t._v(\"org.springframework.web.servlet.handler.\"),e(\"span\",{staticStyle:{color:\"blue\",\"font-weight\":\"bold\"}},[t._v(\"BeanNameUrlHandlerMapping\")])])]),t._v(\" \"),e(\"p\",[t._v(\"较低版本的 SpringMVC 在这里的情况还是一样。\")]),t._v(\" \"),e(\"h3\",{attrs:{id:\"_3结论\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3结论\"}},[t._v(\"#\")]),t._v(\" ③结论\")]),t._v(\" \"),e(\"p\",[t._v(\"在配置不同的情况下，SpringMVC 底层加载的组件不同，特定功能需要特定组件的支持。当特定功能所需组件没有加入到 IOC 容器中的时候，对应的功能就无法使用了。\")]),t._v(\" \"),e(\"p\",[t._v(\"还有一点是：\"),e(\"span\",{staticStyle:{color:\"blue\",\"font-weight\":\"bold\"}},[t._v(\"mvc:annotation-driven\")]),t._v(\" 是 SpringMVC \"),e(\"span\",{staticStyle:{color:\"blue\",\"font-weight\":\"bold\"}},[t._v(\"标配\")]),t._v(\"，必加。\")]),t._v(\" \"),e(\"p\",[e(\"RouterLink\",{attrs:{to:\"/pro005-SpringMVC/lecture/chapter02/verse03.html\"}},[t._v(\"上一节\")]),t._v(\" \"),e(\"RouterLink\",{attrs:{to:\"/pro005-SpringMVC/lecture/chapter02/index.html\"}},[t._v(\"回目录\")]),t._v(\" \"),e(\"RouterLink\",{attrs:{to:\"/pro005-SpringMVC/lecture/chapter02/verse05.html\"}},[t._v(\"下一节\")])],1)])}),[],!1,null,null,null);a.default=n.exports}}]);","extractedComments":[]}
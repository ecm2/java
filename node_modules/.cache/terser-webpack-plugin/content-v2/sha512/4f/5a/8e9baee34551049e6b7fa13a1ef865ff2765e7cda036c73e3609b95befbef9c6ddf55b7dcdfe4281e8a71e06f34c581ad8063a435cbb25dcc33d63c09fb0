{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[117],{505:function(t,a,e){\"use strict\";e.r(a);var s=e(44),v=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":t.$parent.slotKey}},[e(\"p\",[t._v(\"[TOC]\")]),t._v(\" \"),e(\"h1\",{attrs:{id:\"第八节-请求转发和重定向\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#第八节-请求转发和重定向\"}},[t._v(\"#\")]),t._v(\" 第八节 请求转发和重定向\")]),t._v(\" \"),e(\"h2\",{attrs:{id:\"_1、接力\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1、接力\"}},[t._v(\"#\")]),t._v(\" 1、接力\")]),t._v(\" \"),e(\"p\",[t._v(\"发一个请求给Servlet，接力棒就传递到了Servlet手中。而绝大部分情况下，Servlet不能独自完成一切，需要把接力棒继续传递下去，此时我们就需要请求的\"),e(\"span\",{staticStyle:{color:\"blue\",\"font-weight\":\"bold\"}},[t._v(\"『转发』\")]),t._v(\"或\"),e(\"span\",{staticStyle:{color:\"blue\",\"font-weight\":\"bold\"}},[t._v(\"『重定向』\")]),t._v(\"。\")]),t._v(\" \"),e(\"h2\",{attrs:{id:\"_2、转发\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2、转发\"}},[t._v(\"#\")]),t._v(\" 2、转发\")]),t._v(\" \"),e(\"p\",[t._v(\"本质：\"),e(\"span\",{staticStyle:{color:\"blue\",\"font-weight\":\"bold\"}},[t._v(\"转交\")])]),t._v(\" \"),e(\"p\",[t._v(\"完整定义：在请求的处理过程中，Servlet完成了自己的任务，需要把请求\"),e(\"span\",{staticStyle:{color:\"blue\",\"font-weight\":\"bold\"}},[t._v(\"转交给下一个资源\")]),t._v(\"继续处理。\")]),t._v(\" \"),e(\"p\",[e(\"img\",{attrs:{src:\"images/img033.png\",alt:\"images\"}})]),t._v(\" \"),e(\"p\",[t._v(\"代码：\")]),t._v(\" \"),e(\"div\",{staticClass:\"language-java extra-class\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[e(\"code\",[t._v(\"request\"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"getRequestDispatcher\")]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),e(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"/fruit/apple/red/sweet/big.html\"')]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"forward\")]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"request\"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" response\"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\")])])]),e(\"p\",[t._v(\"类比：\")]),t._v(\" \"),e(\"table\",[e(\"thead\",[e(\"tr\",[e(\"th\",[t._v(\"代码\")]),t._v(\" \"),e(\"th\",[t._v(\"类比\")])])]),t._v(\" \"),e(\"tbody\",[e(\"tr\",[e(\"td\",[t._v(\"request\")]),t._v(\" \"),e(\"td\",[t._v(\"小货车\")])]),t._v(\" \"),e(\"tr\",[e(\"td\",[t._v('getRequestDispatcher(\"转发地址\")')]),t._v(\" \"),e(\"td\",[t._v(\"告诉司机要去哪\")])]),t._v(\" \"),e(\"tr\",[e(\"td\",[t._v(\"forward(request, response)\")]),t._v(\" \"),e(\"td\",[t._v(\"出发\")])])])]),t._v(\" \"),e(\"p\",[t._v(\"关键：由于转发操作的核心部分是\"),e(\"span\",{staticStyle:{color:\"blue\",\"font-weight\":\"bold\"}},[t._v(\"在服务器端完成\")]),t._v(\"的，所以浏览器感知不到，整个过程中浏览器\"),e(\"span\",{staticStyle:{color:\"blue\",\"font-weight\":\"bold\"}},[t._v(\"只发送一次请求\")]),t._v(\"。\")]),t._v(\" \"),e(\"p\",[e(\"img\",{attrs:{src:\"images/img036.png\",alt:\"images\"}})]),t._v(\" \"),e(\"h2\",{attrs:{id:\"_3、重定向\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3、重定向\"}},[t._v(\"#\")]),t._v(\" 3、重定向\")]),t._v(\" \"),e(\"p\",[t._v(\"本质：\"),e(\"span\",{staticStyle:{color:\"blue\",\"font-weight\":\"bold\"}},[t._v(\"一种特殊的响应\")])]),t._v(\" \"),e(\"p\",[t._v(\"完整定义：在请求的处理过程中，Servlet完成了自己的任务，然后以一个\"),e(\"span\",{staticStyle:{color:\"blue\",\"font-weight\":\"bold\"}},[t._v(\"响应\")]),t._v(\"的方式告诉浏览器：“要完成这个任务还需要你另外\"),e(\"span\",{staticStyle:{color:\"blue\",\"font-weight\":\"bold\"}},[t._v(\"再访问下一个资源\")]),t._v(\"”。\")]),t._v(\" \"),e(\"p\",[e(\"img\",{attrs:{src:\"images/img034.png\",alt:\"images\"}})]),t._v(\" \"),e(\"p\",[t._v(\"代码：\")]),t._v(\" \"),e(\"div\",{staticClass:\"language-java extra-class\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[e(\"code\",[t._v(\"response\"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"sendRedirect\")]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),e(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"/app/fruit/apple/red/sweet/big.html\"')]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\")])])]),e(\"p\",[e(\"img\",{attrs:{src:\"images/img035.png\",alt:\"images\"}})]),t._v(\" \"),e(\"p\",[t._v(\"关键：由于重定向操作的核心部分是\"),e(\"span\",{staticStyle:{color:\"blue\",\"font-weight\":\"bold\"}},[t._v(\"在浏览器端完成\")]),t._v(\"的，所以整个过程中浏览器\"),e(\"span\",{staticStyle:{color:\"blue\",\"font-weight\":\"bold\"}},[t._v(\"共发送两次请求\")]),t._v(\"。\")]),t._v(\" \"),e(\"h2\",{attrs:{id:\"_4、对比\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_4、对比\"}},[t._v(\"#\")]),t._v(\" 4、对比\")]),t._v(\" \"),e(\"table\",[e(\"thead\",[e(\"tr\",[e(\"th\",[t._v(\"转发\")]),t._v(\" \"),e(\"th\",[t._v(\"重定向\")])])]),t._v(\" \"),e(\"tbody\",[e(\"tr\",[e(\"td\",[e(\"span\",{staticStyle:{color:\"blue\",\"font-weight\":\"bold\"}},[t._v(\"一次请求\")])]),t._v(\" \"),e(\"td\",[e(\"span\",{staticStyle:{color:\"blue\",\"font-weight\":\"bold\"}},[t._v(\"两次请求\")])])]),t._v(\" \"),e(\"tr\",[e(\"td\",[t._v(\"浏览器地址栏显示的是第一个资源的地址\")]),t._v(\" \"),e(\"td\",[t._v(\"浏览器地址栏显示的是第二个资源的地址\")])]),t._v(\" \"),e(\"tr\",[e(\"td\",[t._v(\"全程使用的是同一个request对象\")]),t._v(\" \"),e(\"td\",[t._v(\"全程使用的是不同的request对象\")])]),t._v(\" \"),e(\"tr\",[e(\"td\",[t._v(\"在服务器端完成\")]),t._v(\" \"),e(\"td\",[t._v(\"在浏览器端完成\")])]),t._v(\" \"),e(\"tr\",[e(\"td\",[t._v(\"目标资源地址由服务器解析\")]),t._v(\" \"),e(\"td\",[t._v(\"目标资源地址由浏览器解析\")])]),t._v(\" \"),e(\"tr\",[e(\"td\",[t._v(\"目标资源可以在WEB-INF目录下\")]),t._v(\" \"),e(\"td\",[t._v(\"目标资源不能在WEB-INF目录下\")])]),t._v(\" \"),e(\"tr\",[e(\"td\",[t._v(\"目标资源仅限于本应用内部\")]),t._v(\" \"),e(\"td\",[t._v(\"目标资源可以是外部资源\")])])])]),t._v(\" \"),e(\"h2\",{attrs:{id:\"_5、转发和重定向的应用场景\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_5、转发和重定向的应用场景\"}},[t._v(\"#\")]),t._v(\" 5、转发和重定向的应用场景\")]),t._v(\" \"),e(\"p\",[t._v(\"可以简单的判断：能用转发的先用转发，如果转发不行，再使用重定向。\")]),t._v(\" \"),e(\"ul\",[e(\"li\",[t._v(\"需要通过同一个request对象把数据携带到目标资源：只能用转发\")]),t._v(\" \"),e(\"li\",[t._v(\"如果希望前往下一个资源之后，浏览器刷新访问的是第二个资源：只能用重定向\")])]),t._v(\" \"),e(\"p\",[e(\"RouterLink\",{attrs:{to:\"/pro001-javaweb/lecture/chapter07/verse07.html\"}},[t._v(\"上一节\")]),t._v(\" \"),e(\"RouterLink\",{attrs:{to:\"/pro001-javaweb/lecture/chapter07/index.html\"}},[t._v(\"回目录\")]),t._v(\" \"),e(\"RouterLink\",{attrs:{to:\"/pro001-javaweb/lecture/chapter07/verse09.html\"}},[t._v(\"下一节\")])],1)])}),[],!1,null,null,null);a.default=v.exports}}]);","extractedComments":[]}
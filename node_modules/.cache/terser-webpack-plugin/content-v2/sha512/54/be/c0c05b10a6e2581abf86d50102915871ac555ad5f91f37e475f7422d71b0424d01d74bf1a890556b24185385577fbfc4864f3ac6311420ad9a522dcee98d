{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[189],{1460:function(s,t,e){\"use strict\";e.r(t);var a=e(44),o=Object(a.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":s.$parent.slotKey}},[a(\"p\",[s._v(\"[TOC]\")]),s._v(\" \"),a(\"h1\",{attrs:{id:\"会话控制笔记\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#会话控制笔记\"}},[s._v(\"#\")]),s._v(\" 会话控制笔记\")]),s._v(\" \"),a(\"h2\",{attrs:{id:\"_1、核心代码\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1、核心代码\"}},[s._v(\"#\")]),s._v(\" 1、核心代码\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-java extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"HttpSession\")]),s._v(\" session \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" request\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"getSession\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\nsession\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"setAttribute\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"属性名\"')]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"属性值\"')]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\")])])]),a(\"h2\",{attrs:{id:\"_2、cookie的工作机制\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2、cookie的工作机制\"}},[s._v(\"#\")]),s._v(\" 2、Cookie的工作机制\")]),s._v(\" \"),a(\"ul\",[a(\"li\",[s._v(\"Cookie信息是在服务器创建的\")]),s._v(\" \"),a(\"li\",[s._v(\"Cookie在服务器端被放在响应数据中返回给浏览器\")]),s._v(\" \"),a(\"li\",[s._v(\"浏览器接收到Cookie后，会把Cookie保存起来\")]),s._v(\" \"),a(\"li\",[s._v(\"浏览器保存了Cookie后每一个请求都会把路径匹配的Cookie带上\")])]),s._v(\" \"),a(\"h2\",{attrs:{id:\"_3、cookie的时效性\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3、cookie的时效性\"}},[s._v(\"#\")]),s._v(\" 3、Cookie的时效性\")]),s._v(\" \"),a(\"ul\",[a(\"li\",[s._v(\"会话级Cookie：默认情况\\n\"),a(\"ul\",[a(\"li\",[s._v(\"保存在浏览器的内存里，在浏览器关闭时会被释放\")])])]),s._v(\" \"),a(\"li\",[s._v(\"持久化Cookie：\\n\"),a(\"ul\",[a(\"li\",[s._v(\"服务器端调用Cookie的setMaxAge(以秒为单位的存活时间)方法\\n\"),a(\"ul\",[a(\"li\",[s._v(\"存活时间正数：还能够存活的秒数\")]),s._v(\" \"),a(\"li\",[s._v(\"存活时间为零：告诉浏览器立即删除这个Cookie\")]),s._v(\" \"),a(\"li\",[s._v(\"存活时间为负：告诉浏览器这个Cookie是一个会话级Cookie\")])])]),s._v(\" \"),a(\"li\",[s._v(\"服务器把这个Cookie返回给浏览器时就等于通知浏览器：这个Cookie还能存在多长时间\")])])])]),s._v(\" \"),a(\"h2\",{attrs:{id:\"_4、cookie的路径\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_4、cookie的路径\"}},[s._v(\"#\")]),s._v(\" 4、Cookie的路径\")]),s._v(\" \"),a(\"ul\",[a(\"li\",[s._v(\"每个Cookie都有domain和path这样的两个属性\\n\"),a(\"ul\",[a(\"li\",[s._v(\"domain：表示这个Cookie属于哪个网站，通常以域名为值\")]),s._v(\" \"),a(\"li\",[s._v(\"path：表示这个Cookie属于网站下的哪一个具体的资源\")])])]),s._v(\" \"),a(\"li\",[s._v(\"实际开发中Cookie路径的影响：如果不小心在路径中某个地方多加了一个斜杠，会导致Cookie路径不匹配，该携带的Cookie携带不上来，从而导致Session工作不正常。\")])]),s._v(\" \"),a(\"h2\",{attrs:{id:\"_5、session的工作机制\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_5、session的工作机制\"}},[s._v(\"#\")]),s._v(\" 5、Session的工作机制\")]),s._v(\" \"),a(\"ul\",[a(\"li\",[s._v(\"当服务器端调用了request.getSession()方法\\n\"),a(\"ul\",[a(\"li\",[s._v(\"检查当前请求中是否携带了JSESSIONID这个Cookie\\n\"),a(\"ul\",[a(\"li\",[s._v(\"有携带：根据这个JSESSIONID在服务器端查找对应的Session对象\\n\"),a(\"ul\",[a(\"li\",[s._v(\"能找到：把找到的Session作为getSession()方法的返回值返回\")]),s._v(\" \"),a(\"li\",[s._v(\"找不到：\\n\"),a(\"ul\",[a(\"li\",[s._v(\"创建新的Session对象\")]),s._v(\" \"),a(\"li\",[s._v(\"用新的JSESSIONID的值创建Cookie\")]),s._v(\" \"),a(\"li\",[s._v(\"把新的Cookie返回给浏览器\")])])])])]),s._v(\" \"),a(\"li\",[s._v(\"没携带：\\n\"),a(\"ul\",[a(\"li\",[s._v(\"创建新的Session对象\")]),s._v(\" \"),a(\"li\",[s._v(\"用新的JSESSIONID的值创建Cookie\")]),s._v(\" \"),a(\"li\",[s._v(\"把新的Cookie返回给浏览器\")])])])])])])])]),s._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:e(743),alt:\"./images\"}})]),s._v(\" \"),a(\"h2\",{attrs:{id:\"_6、session的时效性\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_6、session的时效性\"}},[s._v(\"#\")]),s._v(\" 6、Session的时效性\")]),s._v(\" \"),a(\"h3\",{attrs:{id:\"_1session对象为什么要有时效限制\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1session对象为什么要有时效限制\"}},[s._v(\"#\")]),s._v(\" ①Session对象为什么要有时效限制？\")]),s._v(\" \"),a(\"p\",[s._v(\"如果没有时间限制，Session对象数量会快速膨胀，随着访问网站的用户越来越多，Session对象只创建不释放，一定会在某个时间耗尽服务器端的资源。\")]),s._v(\" \"),a(\"h3\",{attrs:{id:\"_2session时效性机制\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2session时效性机制\"}},[s._v(\"#\")]),s._v(\" ②Session时效性机制\")]),s._v(\" \"),a(\"p\",[s._v(\"这个机制的设计很巧妙，它是一个柔性的机制，既避免Session对象无节制的创建耗尽服务器端内存空间，又保证了用户在持续使用Session时Session对象一直都在，不会打断用户的操作。\")]),s._v(\" \"),a(\"ul\",[a(\"li\",[s._v(\"每一个Session对象从创建出来就开始倒计时\")]),s._v(\" \"),a(\"li\",[s._v(\"在倒计时的过程中，一旦有请求访问了这个Session，倒计时清零重新开始\")]),s._v(\" \"),a(\"li\",[s._v(\"一旦一个Session对象的倒计时结束，那么这个Session对象就会被释放\")])]),s._v(\" \"),a(\"h3\",{attrs:{id:\"_3session时效性方法\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3session时效性方法\"}},[s._v(\"#\")]),s._v(\" ③Session时效性方法\")]),s._v(\" \"),a(\"ul\",[a(\"li\",[s._v(\"setMaxInactiveInterval(int interval)设置Session最大的过期时间，interval是一个以秒为单位的过期时间。\")]),s._v(\" \"),a(\"li\",[s._v(\"最大空闲时间默认为1800秒，即半个小时。\")]),s._v(\" \"),a(\"li\",[a(\"span\",{staticStyle:{color:\"blue\",\"font-weight\":\"bold\"}},[s._v(\"invalidate()\")]),s._v(\"立即释放Session对象\")])]),s._v(\" \"),a(\"p\",[a(\"RouterLink\",{attrs:{to:\"/pro001-javaweb/note/index.html\"}},[s._v(\"返回上一级\")])],1)])}),[],!1,null,null,null);t.default=o.exports},743:function(s,t,e){s.exports=e.p+\"assets/img/img036.8d401b8c.png\"}}]);","extractedComments":[]}